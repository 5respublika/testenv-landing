name: Web Deploy

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  prepare:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Create deployment package
      run: |
        echo "Creating deployment package..."
        tar -czf deploy.tar.gz index.html README.md
        ls -la deploy.tar.gz
        
    - name: Upload deployment files
      uses: actions/upload-artifact@v4
      with:
        name: deployment-package
        path: deploy.tar.gz
        
    - name: Show deployment instructions
      run: |
        echo "## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é"
        echo ""
        echo "### 1. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª deploy.tar.gz –∏–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤"
        echo "### 2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –µ–≥–æ –Ω–∞ –í–ú —á–µ—Ä–µ–∑ –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å"
        echo "### 3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ –í–ú:"
        echo "```bash"
        echo "sudo mkdir -p /var/www/testenv-landing"
        echo "sudo tar -xzf deploy.tar.gz -C /var/www/testenv-landing/"
        echo "sudo chown -R www-data:www-data /var/www/testenv-landing/"
        echo "sudo systemctl reload nginx"
        echo "```"
        echo ""
        echo "### 4. –°–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:"
        echo "http://158.160.182.219"
